import{s,u as d,d as l,a as g}from"./index-BxtrJGGV.js";const i=10;function f(o={}){const e=new Date;return o!=null&&o.end?e.setUTCHours(23,59,59,999):e.setUTCHours(0,0,0,0),e.toISOString()}const c=async(o=1)=>{const e=(o-1)*i,t=e+i-1;let r=s.from("Booking").select("*",{count:"exact"}).range(e,t);const{data:a,error:n,count:u}=await r;if(n)throw console.error(n),new Error("Booking could not be loaded");return{data:a,count:u}},h=async(o,e)=>{const{data:t,error:r}=await s.from("Booking").update(e).eq("id",o).select().single();if(r)throw console.error(r),new Error("Booking could not be updated");return t},m=async o=>{const{error:e,data:t}=await s.from("Booking").delete().eq("id",o);if(e)throw new Error("Booking could not be deleted");return t},k=async(o,e)=>{const{data:t,error:r}=await s.from("Booking").select("created_at, totalPrice, extrasPrice, status,numNights").gte("created_at",o).lte("created_at",f({end:!0})).order("created_at",{ascending:!1}).limit(e);if(r)throw new Error("Booking could not be loaded");return t};function w(){const[o]=d(),e=l(),t=o.get("page")?Number(o.get("page")):1,{data:{data:r,count:a}={},isLoading:n,error:u}=g({queryKey:["bookings",t],queryFn:()=>c(t),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1});return t<a?e.prefetchQuery({queryKey:["bookings",t+1],queryFn:()=>c(t+1),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1}):e.prefetchQuery({queryKey:["bookings",t-1],queryFn:()=>c(t-1),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),{Bookings:r,count:a,isLoading:n}}export{i as P,h as a,m as d,k as g,w as u};
