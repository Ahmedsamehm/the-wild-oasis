import{c as d,b,j as e,u as p,L as g}from"./index-BxtrJGGV.js";import{a as j,T as f,S as w}from"./useFilter-LKQwOntb.js";import{u as N}from"./useDeleteBook-DqecA2Dh.js";import{u as x,P as k}from"./useBooking-XrgYWRRI.js";import{F as v}from"./Filter-C36inqW5.js";import{H as y}from"./Header-QfPSsCEn.js";import"./useMutation-B4qgwQtS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],D=d("EllipsisVertical",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],P=d("MoveRight",C);function B({idBooking:s,status:t}){const n=b(),{DeleteBook:l,DeleteLoading:a}=N(),r=()=>{n(`/BookingDetails/${s}`)},o=()=>{n(`/CheckIn/${s}`)};return e.jsxs("details",{className:"dropdown",children:[e.jsx("summary",{className:"btn m-1",children:e.jsx(D,{})}),e.jsxs("ul",{className:"menu dropdown-content bg-base-100 rounded-box shadow-lg z-10 flex flex-row space-x-2 p-2 min-w-fit max-w-[90vw]",children:[t==="unconfirmed"?e.jsx("li",{children:e.jsx("a",{onClick:r,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"See details"})}):e.jsx("li",{children:e.jsx("a",{onClick:o,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"See details"})}),t==="unconfirmed"&&e.jsx("li",{children:e.jsx("a",{onClick:o,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Check in"})}),e.jsx("li",{children:a?e.jsx("button",{className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Deleting..."}):e.jsx("button",{onClick:()=>l(s),className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Delete"})})]})]})}function L(){const[s,t]=p(),{count:n,Bookings:l}=x(),a=s.get("page")?Number(s.get("page")):1,r=Math.ceil(n/k),o=()=>{const i=a===r?a:a+1;s.set("page",i),t(s)},c=()=>{const i=a===1?a:a-1;s.set("page",i),t(s)};return e.jsxs("div",{className:"join space-x-2",children:[e.jsx("button",{onClick:c,disabled:a===1,className:"join-item btn btn-outline",children:"Previous"}),e.jsx("div",{className:"join",children:a}),(l==null?void 0:l.length)===0?e.jsx("button",{onClick:o,disabled:!0,className:"join-item btn btn-outline",children:"Next"}):e.jsx("button",{onClick:o,disabled:a===r,className:"join-item btn btn-outline",children:"Next"})]})}function F(){const{Bookings:s,isLoading:t}=x(),n=j(s||[]),l=[{header:"Cabin"},{header:"Guest"},{header:"Dates"},{header:"Status"},{header:"Amount"},{header:"Actions"}];return s?e.jsx(e.Fragment,{children:t&&s?e.jsx(g,{}):e.jsxs(f,{columns:l,children:[n==null?void 0:n.map(({cabinId:a,guestID:r,startDate:o,endDate:c,status:i,totalPrice:m,id:h},u)=>e.jsxs("tr",{className:"hover:bg-base-300 transition-colors ",children:[e.jsx("th",{className:"break-words",children:a}),e.jsx("td",{className:"break-words",children:r}),e.jsx("td",{className:"break-words",children:e.jsx("ul",{className:"list-none space-y-1",children:e.jsxs("li",{className:"truncate  flex flex-col ",children:[e.jsxs("span",{className:"flex mx-auto gap-1",children:[new Date(o).toLocaleDateString("en-GB"),e.jsx(P,{size:15})]}),e.jsx("span",{className:"badge badge-ghost badge-sm  w-full ",children:new Date(c).toLocaleDateString("en-GB")})]})})}),e.jsx("td",{className:"break-words",children:e.jsx("span",{className:"badge badge-primary  badge-sm p-4",children:i})}),e.jsxs("td",{className:"break-words",children:["$",m]}),e.jsx(B,{idBooking:h,status:i})]},u)),e.jsx("td",{colSpan:12,children:e.jsx(L,{})})]})}):e.jsx("span",{children:"No Bookings"})}function M(){return e.jsxs(e.Fragment,{children:[e.jsx(v,{filterField:"Status",options:[{value:"all",label:"All"},{value:"checked-out",label:"Checked out"},{value:"checked-in",label:"Checked in"},{value:"unconfirmed",label:"Unconfirmed"}]}),e.jsx(w,{filterField:"SortBy",options:[{value:"startDate-desc",label:"Sort by date (recent first)"},{value:"startDate-asc",label:"Sort by date (earlier first)"},{value:"totalPrice-desc",label:"Sort by amount (high first)"},{value:"totalPrice-asc",label:"Sort by amount (low first)"}]})]})}function I(){return e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between gap-2 w-full",children:[e.jsx(y,{className:"w-full md:w-1/3 lg:w-1/4",children:"Bookings"}),e.jsx("div",{className:"flex w-full md:w-2/3 lg:w-3/4 gap-2",children:e.jsx(M,{})})]}),e.jsx(F,{})]})})}export{I as default};
