import{s as l,a as m,u as h,e as k,b as w}from"./index-CWplRMOu.js";const y=10;function B(e={}){const t=new Date;return e!=null&&e.end?t.setUTCHours(23,59,59,999):t.setUTCHours(0,0,0,0),t.toISOString()}const g=async(e=1)=>{const t=(e-1)*y,n=t+y-1;let o=l.from("Booking").select("*",{count:"exact"}).range(t,n);const{data:r,error:a,count:s}=await o;if(a)throw console.error(a),new Error("Booking could not be loaded");return{data:r,count:s}},q=async(e,t)=>{const{data:n,error:o}=await l.from("Booking").update(t).eq("id",e).select().single();if(o)throw console.error(o),new Error("Booking could not be updated");return n},T=async e=>{const{error:t,data:n}=await l.from("Booking").delete().eq("id",e);if(t)throw new Error("Booking could not be deleted");return n},p=async(e,t)=>{const{data:n,error:o}=await l.from("Booking").select("created_at, totalPrice, extrasPrice, status,numNights").gte("created_at",e).lte("created_at",B({end:!0})).order("created_at",{ascending:!1}).limit(t);if(o)throw new Error("Booking could not be loaded");return n};function O(){const e=m.c(10),[t]=h(),n=k();let o;e[0]!==t?(o=t.get("page")?Number(t.get("page")):1,e[0]=t,e[1]=o):o=e[1];const r=o;let a;e[2]!==r?(a={queryKey:["bookings",r],queryFn:()=>g(r),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1},e[2]=r,e[3]=a):a=e[3];const{data:s,isLoading:d}=w(a);let c;e[4]!==s?(c=s===void 0?{}:s,e[4]=s,e[5]=c):c=e[5];const{data:f,count:i}=c;r<i?n.prefetchQuery({queryKey:["bookings",r+1],queryFn:()=>g(r+1),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1}):n.prefetchQuery({queryKey:["bookings",r-1],queryFn:()=>g(r-1),staleTime:2e4,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1});let u;return e[6]!==f||e[7]!==i||e[8]!==d?(u={Bookings:f,count:i,isLoading:d},e[6]=f,e[7]=i,e[8]=d,e[9]=u):u=e[9],u}export{y as P,q as a,T as d,p as g,O as u};
