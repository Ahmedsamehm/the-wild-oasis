import{c as w,a as g,d as k,j as t,u as y,L as v}from"./index-BP0JQ-U7.js";import{a as S,T as D,S as _}from"./useFilter-D84xrYwG.js";import{u as C}from"./useDeleteBook-CR7q5Ku2.js";import{u as N,P}from"./useBooking-BTVaXZaQ.js";import{F as L}from"./Filter-BYDyEXnb.js";import{H as B}from"./Header-BcX5XYMw.js";import"./useMutation-EI1e8LqR.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],$=w("EllipsisVertical",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],I=w("MoveRight",M);function E(e){const s=g.c(22),{idBooking:l,status:i}=e,n=k(),{DeleteBook:c,DeleteLoading:a}=C();let o;s[0]!==l||s[1]!==n?(o=()=>{n(`/BookingDetails/${l}`)},s[0]=l,s[1]=n,s[2]=o):o=s[2];const r=o;let b;s[3]!==l||s[4]!==n?(b=()=>{n(`/CheckIn/${l}`)},s[3]=l,s[4]=n,s[5]=b):b=s[5];const h=b;let f;s[6]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx("summary",{className:"btn m-1",children:t.jsx($,{})}),s[6]=f):f=s[6];let u;s[7]!==h||s[8]!==r||s[9]!==i?(u=i==="unconfirmed"?t.jsx("li",{children:t.jsx("a",{onClick:r,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"See details"})}):t.jsx("li",{children:t.jsx("a",{onClick:h,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"See details"})}),s[7]=h,s[8]=r,s[9]=i,s[10]=u):u=s[10];let d;s[11]!==h||s[12]!==i?(d=i==="unconfirmed"&&t.jsx("li",{children:t.jsx("a",{onClick:h,className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Check in"})}),s[11]=h,s[12]=i,s[13]=d):d=s[13];let m;s[14]!==c||s[15]!==a||s[16]!==l?(m=t.jsx("li",{children:a?t.jsx("button",{className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Deleting..."}):t.jsx("button",{onClick:()=>c(l),className:"text-sm font-bold whitespace-nowrap hover:bg-base-200 px-3 py-2 rounded",children:"Delete"})}),s[14]=c,s[15]=a,s[16]=l,s[17]=m):m=s[17];let x;return s[18]!==u||s[19]!==d||s[20]!==m?(x=t.jsxs("details",{className:"dropdown",children:[f,t.jsxs("ul",{className:"menu dropdown-content bg-base-100 rounded-box shadow-lg z-10 flex flex-row space-x-2 p-2 min-w-fit max-w-[90vw]",children:[u,d,m]})]}),s[18]=u,s[19]=d,s[20]=m,s[21]=x):x=s[21],x}function R(){const e=g.c(25),[s,l]=y(),{count:i,Bookings:n}=N();let c;e[0]!==s?(c=s.get("page")?Number(s.get("page")):1,e[0]=s,e[1]=c):c=e[1];const a=c,o=Math.ceil(i/P);let r;e[2]!==a||e[3]!==o||e[4]!==s||e[5]!==l?(r=()=>{const j=a===o?a:a+1;s.set("page",j),l(s)},e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=r):r=e[6];const b=r;let h;e[7]!==a||e[8]!==s||e[9]!==l?(h=()=>{const j=a===1?a:a-1;s.set("page",j),l(s)},e[7]=a,e[8]=s,e[9]=l,e[10]=h):h=e[10];const f=h,u=a===1;let d;e[11]!==f||e[12]!==u?(d=t.jsx("button",{onClick:f,disabled:u,className:"join-item btn btn-outline",children:"Previous"}),e[11]=f,e[12]=u,e[13]=d):d=e[13];let m;e[14]!==a?(m=t.jsx("div",{className:"join",children:a}),e[14]=a,e[15]=m):m=e[15];let x;e[16]!==(n==null?void 0:n.length)||e[17]!==a||e[18]!==b||e[19]!==o?(x=(n==null?void 0:n.length)===0?t.jsx("button",{onClick:b,disabled:!0,className:"join-item btn btn-outline",children:"Next"}):t.jsx("button",{onClick:b,disabled:a===o,className:"join-item btn btn-outline",children:"Next"}),e[16]=n==null?void 0:n.length,e[17]=a,e[18]=b,e[19]=o,e[20]=x):x=e[20];let p;return e[21]!==d||e[22]!==m||e[23]!==x?(p=t.jsxs("div",{className:"join space-x-2",children:[d,m,x]}),e[21]=d,e[22]=m,e[23]=x,e[24]=p):p=e[24],p}function T(){const e=g.c(8),{Bookings:s,isLoading:l}=N();let i;e[0]!==s?(i=s||[],e[0]=s,e[1]=i):i=e[1];const n=S(i);let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=[{header:"Cabin"},{header:"Guest"},{header:"Dates"},{header:"Status"},{header:"Amount"},{header:"Actions"}],e[2]=c):c=e[2];const a=c;if(!s){let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("span",{children:"No Bookings"}),e[3]=r):r=e[3],r}let o;return e[4]!==s||e[5]!==l||e[6]!==n?(o=t.jsx(t.Fragment,{children:l&&s?t.jsx(v,{}):t.jsxs(D,{columns:a,children:[n==null?void 0:n.map(A),t.jsx("td",{colSpan:12,children:t.jsx(R,{})})]})}),e[4]=s,e[5]=l,e[6]=n,e[7]=o):o=e[7],o}function A(e,s){const{cabinId:l,guestID:i,startDate:n,endDate:c,status:a,totalPrice:o,id:r}=e;return t.jsxs("tr",{className:"hover:bg-base-300 transition-colors ",children:[t.jsx("th",{className:"break-words",children:l}),t.jsx("td",{className:"break-words",children:i}),t.jsx("td",{className:"break-words",children:t.jsx("ul",{className:"list-none space-y-1",children:t.jsxs("li",{className:"truncate  flex flex-col ",children:[t.jsxs("span",{className:"flex mx-auto gap-1",children:[new Date(n).toLocaleDateString("en-GB"),t.jsx(I,{size:15})]}),t.jsx("span",{className:"badge badge-ghost badge-sm  w-full ",children:new Date(c).toLocaleDateString("en-GB")})]})})}),t.jsx("td",{className:"break-words",children:t.jsx("span",{className:"badge badge-primary  badge-sm p-4",children:a})}),t.jsxs("td",{className:"break-words",children:["$",o]}),t.jsx(E,{idBooking:r,status:a})]},s)}function G(){const e=g.c(2);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(L,{filterField:"Status",options:[{value:"all",label:"All"},{value:"checked-out",label:"Checked out"},{value:"checked-in",label:"Checked in"},{value:"unconfirmed",label:"Unconfirmed"}]}),e[0]=s):s=e[0];let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsxs(t.Fragment,{children:[s,t.jsx(_,{filterField:"SortBy",options:[{value:"startDate-desc",label:"Sort by date (recent first)"},{value:"startDate-asc",label:"Sort by date (earlier first)"},{value:"totalPrice-desc",label:"Sort by amount (high first)"},{value:"totalPrice-asc",label:"Sort by amount (low first)"}]})]}),e[1]=l):l=e[1],l}function K(){return t.jsx(t.Fragment,{children:t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"flex flex-col md:flex-row justify-between gap-2 w-full",children:[t.jsx(B,{className:"w-full md:w-1/3 lg:w-1/4",children:"Bookings"}),t.jsx("div",{className:"flex w-full md:w-2/3 lg:w-3/4 gap-2",children:t.jsx(G,{})})]}),t.jsx(T,{})]})})}export{K as default};
