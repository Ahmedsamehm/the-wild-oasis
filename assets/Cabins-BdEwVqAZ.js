import{a as C,e as me,V as te,j as s,L as pe,r as fe}from"./index-CWplRMOu.js";import{u as ge,T as he,S as je}from"./useFilter-hH9ctBb6.js";import{u as xe}from"./index.esm--Hw4E_Fw.js";import{u as de}from"./useMutation-DWOrhH8L.js";import{A as ye,E as Ce,d as Ne,u as we}from"./useGetCabins-CHQPSc9D.js";import{F as ve}from"./Filter-B7enoWF1.js";import{H as Se}from"./Header-VCNk3Hq9.js";function _e(){const t=C.c(6),e=me(),{reset:i}=xe();let l;t[0]!==e||t[1]!==i?(l={mutationFn:ye,onSuccess:()=>{te.success("Cabin added successfully"),e.invalidateQueries(["cabins"]),i()},onError:Ee},t[0]=e,t[1]=i,t[2]=l):l=t[2];const{mutate:r,isPending:c}=de(l);let f;return t[3]!==r||t[4]!==c?(f={AddCabins:r,isAddLoading:c},t[3]=r,t[4]=c,t[5]=f):f=t[5],f}function Ee(t){te.error(t.message||"Failed to add cabin")}function Fe(){const t=C.c(5),e=me();let i;t[0]!==e?(i={mutationFn:Ae,onSuccess:()=>{te.success("Cabin updated successfully"),e.invalidateQueries(["cabins"])},onError:De},t[0]=e,t[1]=i):i=t[1];const{mutate:l,isPending:r}=de(i);let c;return t[2]!==l||t[3]!==r?(c={EditCabin:l,isEditLoading:r},t[2]=l,t[3]=r,t[4]=c):c=t[4],c}function De(t){te.error(t.message||"Failed to update cabin")}function Ae(t){return Ce(t,t.id)}function Pe(t){const e=C.c(106),{setIsOpen:i,cabinToEdit:l}=t,{AddCabins:r,isAddLoading:c}=_e(),{EditCabin:f,isEditLoading:N}=Fe(),o=!!l;let p;e[0]!==l?(p=l||{},e[0]=l,e[1]=p):p=e[1];let b;e[2]!==p?(b={defaultValues:p,image:void 0},e[2]=p,e[3]=b):b=e[3];const{register:n,handleSubmit:se,formState:w}=xe(b),{errors:a}=w,m=c||N;if(m){let j;return e[4]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(pe,{}),e[4]=j):j=e[4],j}let h;e[5]!==r||e[6]!==f||e[7]!==l||e[8]!==o||e[9]!==i?(h=j=>{var be;const ue=((be=j.image)==null?void 0:be[0])instanceof File?j.image[0]:o?l==null?void 0:l.image:"";o?f({...j,image:ue,id:l.id}):r({...j,image:ue}),i(!1)},e[5]=r,e[6]=f,e[7]=l,e[8]=o,e[9]=i,e[10]=h):h=e[10];const g=h;let x;e[11]!==se||e[12]!==g?(x=se(g),e[11]=se,e[12]=g,e[13]=x):x=e[13];const d=o?"Edit Cabin":"Create New Cabin";let u;e[14]!==d?(u=s.jsx("h2",{className:"text-2xl font-bold mb-6 text-base-content text-center",children:d}),e[14]=d,e[15]=u):u=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx("label",{className:"block text-base-content mb-2",children:"Cabin name"}),e[16]=y):y=e[16];let v;e[17]!==n?(v=n("Name",{required:"Cabin name is required"}),e[17]=n,e[18]=v):v=e[18];let S;e[19]!==v?(S=s.jsx("input",{type:"text",...v,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter cabin name"}),e[19]=v,e[20]=S):S=e[20];let _;e[21]!==a.Name?(_=a.Name&&s.jsx("p",{className:"text-error text-sm mt-1",children:a.Name.message}),e[21]=a.Name,e[22]=_):_=e[22];let E;e[23]!==S||e[24]!==_?(E=s.jsxs("div",{className:"mb-4",children:[y,S,_]}),e[23]=S,e[24]=_,e[25]=E):E=e[25];let ie;e[26]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx("label",{className:"block text-base-content mb-2",children:"Maximum capacity"}),e[26]=ie):ie=e[26];let F;e[27]!==n?(F=n("maxCapacity",{required:"Maximum capacity is required",min:{value:1,message:"Capacity must be at least 1"}}),e[27]=n,e[28]=F):F=e[28];let D;e[29]!==F?(D=s.jsx("input",{type:"number",...F,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter maximum capacity"}),e[29]=F,e[30]=D):D=e[30];let A;e[31]!==a.maxCapacity?(A=a.maxCapacity&&s.jsx("p",{className:"text-error text-sm mt-1",children:a.maxCapacity.message}),e[31]=a.maxCapacity,e[32]=A):A=e[32];let P;e[33]!==D||e[34]!==A?(P=s.jsxs("div",{className:"mb-4",children:[ie,D,A]}),e[33]=D,e[34]=A,e[35]=P):P=e[35];let le;e[36]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx("label",{className:"block text-base-content mb-2",children:"Regular price"}),e[36]=le):le=e[36];let k;e[37]!==n?(k=n("regularPrice",{required:"Regular price is required",min:{value:0,message:"Price cannot be negative"}}),e[37]=n,e[38]=k):k=e[38];let q;e[39]!==k?(q=s.jsx("input",{type:"number",...k,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter regular price"}),e[39]=k,e[40]=q):q=e[40];let $;e[41]!==a.regularPrice?($=a.regularPrice&&s.jsx("p",{className:"text-error text-sm mt-1",children:a.regularPrice.message}),e[41]=a.regularPrice,e[42]=$):$=e[42];let L;e[43]!==q||e[44]!==$?(L=s.jsxs("div",{className:"mb-4",children:[le,q,$]}),e[43]=q,e[44]=$,e[45]=L):L=e[45];let ae;e[46]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx("label",{className:"block text-base-content mb-2",children:"Discount"}),e[46]=ae):ae=e[46];let O;e[47]!==n?(O=n("discount",{required:"Discount is required",min:{value:0,message:"Discount cannot be negative"}}),e[47]=n,e[48]=O):O=e[48];let Q;e[49]!==O?(Q=s.jsx("input",{type:"number",...O,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter discount",defaultValue:0}),e[49]=O,e[50]=Q):Q=e[50];let R;e[51]!==a.discount?(R=a.discount&&s.jsx("p",{className:"text-error text-sm mt-1",children:a.discount.message}),e[51]=a.discount,e[52]=R):R=e[52];let T;e[53]!==Q||e[54]!==R?(T=s.jsxs("div",{className:"mb-4",children:[ae,Q,R]}),e[53]=Q,e[54]=R,e[55]=T):T=e[55];let ne;e[56]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx("label",{className:"block text-base-content mb-2",children:"Description for website"}),e[56]=ne):ne=e[56];let V;e[57]!==n?(V=n("description",{required:"Description is required"}),e[57]=n,e[58]=V):V=e[58];let M;e[59]!==V?(M=s.jsx("textarea",{...V,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary h-24 resize-none",placeholder:"Enter description"}),e[59]=V,e[60]=M):M=e[60];let U;e[61]!==a.description?(U=a.description&&s.jsx("p",{className:"text-error text-sm mt-1",children:a.description.message}),e[61]=a.description,e[62]=U):U=e[62];let z;e[63]!==M||e[64]!==U?(z=s.jsxs("div",{className:"mb-4 md:col-span-2",children:[ne,M,U]}),e[63]=M,e[64]=U,e[65]=z):z=e[65];let re;e[66]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx("label",{className:"block text-base-content mb-2",children:"Cabin image"}),e[66]=re):re=e[66];let B;e[67]!==l||e[68]!==o?(B=o&&l.image&&s.jsx("img",{src:l.image,alt:"Current cabin",className:"w-24 h-24 mb-2 rounded-lg"}),e[67]=l,e[68]=o,e[69]=B):B=e[69];let H;e[70]!==n?(H=n("image"),e[70]=n,e[71]=H):H=e[71];let I;e[72]!==H?(I=s.jsx("input",{type:"file",...H,className:"w-full p-3 rounded-lg bg-base-100 border border-base-300 focus:outline-none focus:ring-2 focus:ring-primary file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-content hover:file:bg-primary-focus",accept:"image/*"}),e[72]=H,e[73]=I):I=e[73];const oe=o?"Upload a new image to replace the current one (optional)":"You should use an image to create the cabin";let W;e[74]!==oe?(W=s.jsx("p",{className:"text-base-content text-sm mt-1",children:oe}),e[74]=oe,e[75]=W):W=e[75];let Z;e[76]!==B||e[77]!==I||e[78]!==W?(Z=s.jsxs("div",{className:"mb-6 md:col-span-2",children:[re,B,I,W]}),e[76]=B,e[77]=I,e[78]=W,e[79]=Z):Z=e[79];let G;e[80]!==E||e[81]!==P||e[82]!==L||e[83]!==T||e[84]!==z||e[85]!==Z?(G=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E,P,L,T,z,Z]}),e[80]=E,e[81]=P,e[82]=L,e[83]=T,e[84]=z,e[85]=Z,e[86]=G):G=e[86];let Y;e[87]!==i?(Y=()=>i(!1),e[87]=i,e[88]=Y):Y=e[88];let J;e[89]!==m||e[90]!==Y?(J=s.jsx("button",{type:"button",className:"btn btn-neutral",onClick:Y,disabled:m,children:"Cancel"}),e[89]=m,e[90]=Y,e[91]=J):J=e[91];let K;e[92]!==o||e[93]!==m?(K=m?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),o?"Updating...":"Adding..."]}):o?"Update Cabin":"Add Cabin",e[92]=o,e[93]=m,e[94]=K):K=e[94];let X;e[95]!==m||e[96]!==K?(X=s.jsx("button",{disabled:m,type:"submit",className:"btn btn-primary",children:K}),e[95]=m,e[96]=K,e[97]=X):X=e[97];let ee;e[98]!==J||e[99]!==X?(ee=s.jsxs("div",{className:"flex justify-end gap-4 mt-6 md:col-span-2",children:[J,X]}),e[98]=J,e[99]=X,e[100]=ee):ee=e[100];let ce;return e[101]!==G||e[102]!==ee||e[103]!==x||e[104]!==u?(ce=s.jsxs("form",{onSubmit:x,className:"bg-base-200 p-6 rounded-lg shadow-lg",children:[u,G,ee]}),e[101]=G,e[102]=ee,e[103]=x,e[104]=u,e[105]=ce):ce=e[105],ce}function ke(){const t=C.c(5),e=me();let i;t[0]!==e?(i={mutationFn:$e,onSuccess:()=>{e.invalidateQueries(["cabins"]),te.success("Deleted Cabin")},onError:qe},t[0]=e,t[1]=i):i=t[1];const{isPending:l,mutate:r}=de(i);let c;return t[2]!==r||t[3]!==l?(c={isDeleting:l,OnClickDeleteCabin:r},t[2]=r,t[3]=l,t[4]=c):c=t[4],c}function qe(t){te.error("Delete failed: "+t.message)}function $e(t){return Ne(t)}function Le(){const t=C.c(18),{cabins:e,isLoading:i}=we(),[l,r]=fe.useState(!1),[c,f]=fe.useState(),{isDeleting:N,OnClickDeleteCabin:o}=ke();let p;t[0]!==e?(p=e||[],t[0]=e,t[1]=p):p=t[1];const{sortedCabins:b}=ge(p);let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=[{header:"Cabin",width:"w-1/6"},{header:"Name",width:"w-1/6"},{header:"Capacity",width:"w-1/6"},{header:"Price",width:"w-1/6"},{header:"Discount",width:"w-1/6"},{header:"Actions",width:"w-1/6"}],t[2]=n):n=t[2];const se=n;let w;t[3]!==b?(w=d=>{const u=b.find(y=>y.id===d);if(u){const y={id:u.id,description:u.description,discount:u.discount,regularPrice:u.regularPrice,maxCapacity:u.maxCapacity,Name:u.Name,image:u.image};f(y),r(!0)}},t[3]=b,t[4]=w):w=t[4];const a=w;let m;t[5]!==o||t[6]!==a||t[7]!==N||t[8]!==i||t[9]!==b?(m=i?s.jsx(pe,{}):s.jsx(he,{columns:se,children:b==null?void 0:b.map(d=>s.jsxs("tr",{className:"hover:bg-base-300 transition-colors text-center",children:[s.jsx("td",{children:s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("div",{className:"avatar mx-auto",children:s.jsx("div",{className:"mask mask-squircle size-12",children:s.jsx("img",{src:d.image,alt:d.Name})})})})}),s.jsx("td",{children:d.Name}),s.jsx("td",{children:d.maxCapacity}),s.jsx("td",{children:d.regularPrice}),s.jsxs("th",{children:["$",d.discount]}),s.jsx("th",{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"btn btn-error",onClick:()=>o(d.id),disabled:N,children:N?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Deleting..."]}):"Delete"}),s.jsx("button",{onClick:()=>a(d.id),className:"btn btn-primary",children:"Edit"})]})})]},d.id))}),t[5]=o,t[6]=a,t[7]=N,t[8]=i,t[9]=b,t[10]=m):m=t[10];let h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx("button",{className:"btn btn-primary mt-4",onClick:()=>{f(null),r(!0)},children:"Add Cabin"}),t[11]=h):h=t[11];let g;t[12]!==l||t[13]!==c?(g=l&&s.jsx("dialog",{open:!0,className:"modal modal-open",onClose:()=>r(!1),children:s.jsx("div",{className:"modal-box max-w-2xl bg-base-200 p-6 shadow-lg",children:s.jsx(Pe,{setIsOpen:r,cabinToEdit:c})})}),t[12]=l,t[13]=c,t[14]=g):g=t[14];let x;return t[15]!==m||t[16]!==g?(x=s.jsxs(s.Fragment,{children:[m,h,g]}),t[15]=m,t[16]=g,t[17]=x):x=t[17],x}function Oe(){const t=C.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(ve,{filterField:"Discount",options:[{value:"All",label:"All"},{value:"No-discount",label:"No-discount"},{value:"With-discount",label:"With-discount"}]}),t[0]=e):e=t[0];let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsxs(s.Fragment,{children:[e,s.jsx(je,{filterField:"SortBy",options:[{value:"name-asc",label:"Sort by name (A-Z)"},{value:"name-disc",label:"Sort by name (Z-A)"},{value:"regularPrice-asc",label:"Sort by price (low frist)"},{value:"regularPrice-disc",label:"Sort by price (high frist)"},{value:"maxCapacity-asc",label:"Sort by capacity (low frist)"},{value:"maxCapacity-disc",label:"Sort by capacity (high frist)"}]})]}),t[1]=i):i=t[1],i}function Be(){const t=C.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(Se,{className:"w-full md:w-1/3 lg:w-1/4",children:"Cabins"}),t[0]=e):e=t[0];let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-center gap-2 w-full",children:[e,s.jsx("ul",{className:"flex w-full md:w-2/3 lg:w-3/4 items-center gap-2",children:s.jsx(Oe,{})})]}),s.jsx(Le,{})]}),t[1]=i):i=t[1],i}export{Be as default};
